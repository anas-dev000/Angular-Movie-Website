<app-navbar></app-navbar>

@if (!loading) {
  @if (movie) {
    <div class="container mt-4">
      <div class="row">
        <div class="col-md-4">
          <img
            [src]="imgBaseUrl + movie.poster_path"
            alt="{{ movie.title }}"
            class="img-fluid"
          />
        </div>
        <div class="col-md-8">
          <h1>{{ movie.title }}</h1>
          <p>{{ movie.release_date | date: 'MMM d, y' }}</p>
          <p>{{ movie.overview }}</p>
          <button class="btn btn-warning" (click)="toggleWishlist()">
            <i class="bi bi-heart" [class.bi-heart-fill]="isInWishlist"></i>
            Wishlist
          </button>

          @if (trailerUrl) {
            <div class="mt-3">
              <iframe
                [src]="trailerUrl"
                width="560"
                height="315"
                frameborder="0"
                allowfullscreen
              ></iframe>
            </div>
          }
        </div>
      </div>

      <h3 class="mt-4">Recommendations</h3>

      @if (recLoading) {
        <div class="text-center">
          <div class="spinner-border text-warning" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      }
      @else {
        <div class="row">
          @for (movie of recommendations; track movie.id) {
            <div class="col-md-3 mb-3">
              <app-movie-card [movie]="movie"></app-movie-card>
            </div>
          }
        </div>
      }
    </div>
  }
}
@else {
  <div class="text-center">
    <div class="spinner-border text-warning" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
}

<button
  class="btn btn-warning position-fixed bottom-0 end-0 m-3"
  (click)="scrollToTop()"
>
  Back to Top
</button>
